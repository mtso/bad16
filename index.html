<!DOCTYPE html>
<html>
	<head>
		<title> BAD 2016 </title>
		<style>
			body{
				/* Display none makes sure that when the image hasn't loaded yet, 
				   the other information isn't shown. */
				display: none; 
				margin: 0;

				font: 4em 'Oswald',sans-serif;
				text-align: center;
			}
			table{
				display: inline-block;
			}
			img{
				z-index: 100; /* Image is over everything except the links. */
				position: fixed;
				display: block;
			}
			#links{
				position: relative;
				width: 100%;
				z-index: 200;
				position: absolute;
				text-align: center;
				font-family: 'Oswald',sans-serif;
				font-size: 20px;
			}
			#links a{
				color: #000;
				text-decoration: none;
			}
			#links a:hover{
				text-decoration: underline;
			}
		</style>
	</head>
	<body>
		<!-- <div id="links">
			<a href="http://facebook.com">Facebook</a>
			<a href="http://eventbrite.com">Eventbrite</a>
		</div> -->
		<audio autoplay loop preload="auto" id="badAudio">
			<source src="badmusic_mobile.ogg" type="audio/ogg">
			<source src="badmusic_mobile.wav" type="audio/wav">
			<source src="badmusic.mp3" type="audio/mpeg">
			Your browser does not support the audio tag.
		</audio>

		<img id="cover" src="https://raw.githubusercontent.com/mtso/bad16/gh-pages/cover.png">
		
		<!-- <div id="timer">
			<h1 id="countdown"></h1> 
			
		</div> -->
		<div id="table" style="font-family:'Oswald',sans-serif;font-size:30px">
			<table border="0" cellpadding="10">
				<tr>
					<th align="right">Date</th>
					<td align="left">4/30/16</td>
				</tr>
				<tr>
					<th align="right">Pick Up Time</th>
					<td align="left">2:00 PM</td>
				</tr>
				<tr>
					<th align="right">Attire</th>
					<td align="left">Semi-Formal/Formal</td>
				</tr>
			</table>
		</div>

		<script type="text/javascript">
			// Cover variables
			var CurX;
		    	var CurY;
		    	var cover;
		    	var IE = document.all?true:false;

		    	// Timer constants
			var eventDate = new Date('04/30/2016 2:00 PM');
	        	var _second = 1000;
	        	var _minute = _second * 60;
	        	var _hour = _minute * 60;
	        	var _day = _hour * 24;

			window.onload = function() { 
				// Display full page when everything is loaded (because this script is loaded last).
				document.getElementsByTagName("body")[0].style.display = "inline"; 
				
				// Hide cursor
				document.body.style.cursor = 'none';

				// Assign cover image object to cover variable.
				cover = document.getElementById("cover");
				
				// Audio trickery
				var onClick = function() {
					startMusic();
				}
				cover.addEventListener('click', onClick, false);
				
				// showRemaining();
				// Start Clock
				// var timer = setInterval(showRemaining, 1000);

				if(IE){
				CurX = window.event.clientX;
				CurY = window.event.clientY;
				} else {
					if (window.captureEvents) {
						document.captureEvents(Event.MOUSEMOVE);
					}
					document.onmousemove = moveCover;
				}
			}
			
			function moveCover(e) {   
			
			    CurX = (window.Event) ? e.pageX : event.clientX + (document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft);
			    CurY = (window.Event) ? e.pageY : event.clientY + (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop);

			    // cover.png is 3000 x 3000 px so to match the cursor with the center,
			    // an offset is hardcoded to the cursor values
			    var coverCenterX = CurX - 3000; 
			    var coverCenterY = CurY - 2000;

			    cover.style.left = coverCenterX + "px";
			    cover.style.top = coverCenterY + "px";
			    
			    document.getElementById("links").style.zIndex = "200";
			    
			}
    
	        	function showRemaining() {
		            var now = new Date();
		            var timeLeft = eventDate - now;
		            
		            var days = Math.floor(timeLeft / _day);
		            var hours = Math.floor((timeLeft % _day) / _hour);
		            var minutes = Math.floor((timeLeft % _hour) / _minute);
		            var seconds = Math.floor((timeLeft % _minute) / _second);
		            
		            // Display a 0 for single digit values
		            if (days < 10) {
		            	days = String("0" + days)
		            }
		            if (hours < 10) {
		            	hours = String("0" + hours)
		            }
		            if (minutes < 10) {
		            	minutes = String("0" + minutes)
		            }
		            if (seconds < 10) {
		            	seconds = String("0" + seconds)
		            }
	
		            //document.getElementById("countdown").innerHTML = days + ':' + hours + ':' + minutes + ':' + seconds;
	        	}
	        	// Audio
			var needMusicStart = true;
			var badAudio = document.getElementById("badAudio");
			
			badAudio.onplaying = function() {
				needMusicStart = false;
				console.log("Music started.");
			}
			
			function startMusic() {
			    // Start Audio if need to
			    if (needMusicStart) {
			    	badAudio.play();
			    }
			}
			

		</script>
	</body>
</html>
